<!DOCTYPE html>
<html lang="ja">
<head>
<!--
TODO 
separate script
publish ボタンを実装
-->
  <meta charset="UTF-8">
  <title>Web3 Site Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
<body>
<div style='width:100%;float:left;padding-bottom:3px;'>
  <button style='width:20%;left'>Publish</button>
    <input style='width:67%;left' id=url > 
</div>
  <div id="editor" style="width:50%;height:700px;float:left;"></div>
  <div id="html" style="width:50%; height:700px;float:left;">
    <iframe style="width:100%;height:100%;" id='iframe1'></iframe>
  </div>
  <script>
    var editor = ace.edit("editor");
    editor.$blockScrolling = Infinity;
    editor.setTheme("ace/theme/monokai");
  editor.getSession().setMode("ace/mode/html");
    editor.setValue('<html><h1>hello world</html>');
    editor.getSession().on('change', ()=> {update()});
     update=()=> {
      var val = editor.getSession().getValue();
      document.getElementById('iframe1').src = "data:text/html;charset=utf-8," + escape(val);
    }
  </script>
</body>
</html>
